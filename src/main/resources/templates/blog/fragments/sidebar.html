<!DOCTYPE html>
<html lang="en"
      th:lang="|${#locale.language}-${#locale.country}|"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<body>
<!-- Sidebar -->
<div th:fragment="sidebar" class="lg:w-1/4">
    <!-- Search Section -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-8">
        <h3 class="text-xl font-bold mb-4 text-gray-800" th:text="#{label.search}">Search</h3>
        <form class="flex" method="get" action="/posts/search" th:action="@{/posts/search}">
            <input type="text" name="q" th:placeholder="#{label.search.placeholder}" placeholder="Search..." class="px-4 py-2 w-full rounded-l-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500">
            <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-r-md">
                <i class="fas fa-search"></i>
            </button>
        </form>
    </div>

    <!-- Newsletter Section -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-8">
        <h3 class="text-xl font-bold mb-4 text-gray-800" th:text="#{label.subscribe_to_newsletter}">Subscribe to Newsletter</h3>
        <p class="text-gray-600 mb-4" th:text="#{label.subscribe_to_newsletter_desc}">
            Subscribe to our newsletter to get the latest updates.
        </p>
        <form class="flex flex-col" method="post" action="/newsletter/subscribe"
              th:action="@{/newsletter/subscribe}"
              hx-post="/newsletter/subscribe"
              hx-target="#subscribeStatus"
              hx-on::after-request="if(event.detail.successful) this.reset()">
            <input type="email" name="email" placeholder="Your email address" th:placeholder="#{label.newsletter_email_placeholder}"
                   class="px-4 py-2 mb-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500">
            <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md" th:text="#{label.subscribe}">
                Subscribe
            </button>
            <div id="subscribeStatus" class="mt-2 text-center font-bold text-amber-700"></div>
        </form>
    </div>

    <!-- Categories Section -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-8">
        <h3 class="text-xl font-bold mb-4 text-gray-800" th:text="#{label.categories}">Categories</h3>
        <ul id="categories-list" class="space-y-2">
            <!-- Categories will be dynamically loaded here -->
            <li th:each="category : ${categories}">
                <a href="/categories/slug"
                   th:href="@{'/categories/'+${category.slug}+'/posts'}"
                   class="flex justify-between items-center text-gray-700 hover:text-blue-600">
                    <span th:text="${category.label}">Label</span>
                    <span class="bg-gray-200 text-gray-700 px-2 py-1 rounded-full text-xs" th:text="${category.postCount}">4</span>
                </a>
            </li>
        </ul>
    </div>

    <!-- Tags Section -->
    <div class="bg-white rounded-lg shadow-md p-6">
        <h3 class="text-xl font-bold mb-4 text-gray-800" th:text="#{label.tags}">Tags</h3>
        <div id="tags-list" class="flex flex-wrap gap-2">
            <!-- Tags will be dynamically loaded here -->
            <a th:each="tag : ${tags}"
               href="/tags/slug"
               class="bg-gray-200 hover:bg-blue-100 text-gray-700 hover:text-blue-600 px-3 py-1 rounded-full text-sm"
               th:href="@{'/tags/'+${tag.slug}+'/posts'}"
               th:text="${tag.label}">
                Tag Name
            </a>
        </div>
    </div>
</div>
</body>
</html>