<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/admin-layout}">}">
<body>
<div class="flex-1 pt-5 p-8" layout:fragment="content">
    <h1 class="text-3xl font-bold mb-6 text-gray-800" th:text="#{label.create_new_post}">Create New Post</h1>

    <div class="bg-white rounded-lg shadow-md p-6">
        <!-- New Post Form -->
        <form id="new-post-form" method="post" action="#" th:action="@{/admin/posts}" th:object="${postForm}">
            <div class="mb-4">
                <label for="title" class="block text-gray-700 font-medium mb-2" th:text="#{label.title}">Title</label>
                <input type="text" id="title" name="title"
                       class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                       th:field="*{title}">
                <div class="text-red-600" th:if="${#fields.hasErrors('title')}"
                     th:errors="*{title}" th:text-default="#{error.incorrect_data}">Incorrect data
                </div>
            </div>

            <div class="mb-4">
                <label for="mdContent" class="block text-gray-700 font-medium mb-2" th:text="#{label.markdown_content}">Markdown
                    Content</label>
                <textarea id="mdContent" name="mdContent" rows="10"
                          class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                          th:field="*{mdContent}"></textarea>
                <div class="text-red-600" th:if="${#fields.hasErrors('mdContent')}"
                     th:errors="*{mdContent}" th:text-default="#{error.incorrect_data}">Incorrect data
                </div>
            </div>

            <div class="mb-4">
                <label for="category" class="block text-gray-700 font-medium mb-2"
                       th:text="#{label.category}">Category</label>
                <select id="category" name="category"
                        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                        th:field="*{category}">
                    <option value="" th:text="#{label.select_category}">Select a category</option>
                    <option th:each="cat: ${categories}" th:value="${cat.slug}"
                            th:label="${cat.label}"></option>
                </select>
                <div class="text-red-600" th:if="${#fields.hasErrors('category')}"
                     th:errors="*{category}" th:text-default="#{error.incorrect_data}">Incorrect data
                </div>
            </div>

            <div class="mb-4">
                <label for="tags" class="block text-gray-700 font-medium mb-2" th:text="#{label.tags}">Tags</label>
                <input type="text" id="tags" name="tags"
                       class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                       th:field="*{tags}">
                <div class="text-red-600" th:if="${#fields.hasErrors('tags')}"
                     th:errors="*{tags}" th:text-default="#{error.incorrect_data}">Incorrect data
                </div>
            </div>

            <div class="mb-4">
                <label for="status" class="block text-gray-700 font-medium mb-2"
                       th:text="#{label.status}">Status</label>
                <select id="status" name="status"
                        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                        th:field="*{status}">
                    <option th:each="s: ${postStatuses}" th:value="${s}" th:label="${s}"></option>
                </select>
                <div class="text-red-600" th:if="${#fields.hasErrors('status')}"
                     th:errors="*{status}" th:text-default="#{error.incorrect_data}">Incorrect data
                </div>
            </div>

            <div class="flex justify-end space-x-4">
                <a href="/admin/posts" id="cancel-button"
                   class="bg-gray-300 text-gray-800 px-6 py-2 rounded-md hover:bg-gray-400 transition-colors"
                   th:text="#{label.cancel}">
                    Cancel
                </a>
                <button type="submit"
                        class="bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition-colors"
                        th:text="#{label.create_post}">
                    Create Post
                </button>
            </div>
        </form>
    </div>
</div>
<th:block layout:fragment="script-content">
    <script th:inline="javascript">
        $(document).ready(function () {
            const simplemde = new SimpleMDE({
                element: document.getElementById("mdContent"),
                spellChecker: false,
                autofocus: true,
                placeholder: "Write your post content here..."
            });
        });
    </script>
</th:block>
</body>
</html>